<html lang="en">
<head>
    <link rel="stylesheet" href="board.css">
    <title>CHESSBOARD</title>
</head>

<header>

</header>

<div class="container">
    <div>
        <div style="display: left;" id="button">
            <button id="run_button" onclick="run_ws()">=</button>
        </div>
        <div style="display: left;" id="button2">
            <button id="run_button2" onclick="instring()">=</button>
        </div>
    </div>
    <div class="chessarea" id="chessarea"></div>
</div>


<script src="board.js"></script>
<script>
    setInterval(
        function() {
            chessarea = document.getElementById("container");
            whitePiece = document.querySelectorAll(".white-piece");
            blackPiece = document.querySelectorAll(".black-piece");
            rect = chessarea.getBoundingClientRect();

            chessarea.style.height = rect.width;
            whitePiece.forEach((piece) => {
                piece.style.width = rect.width * 2.5;
                piece.style.height = rect.width * 2.5;
            })

            blackPiece.forEach((piece) => {
                piece.style.width = rect.width * 2.5;
                piece.style.height = rect.width * 2.5;
            })
        },
        100
    );
</script>

<script>
    function run_ws() {
        let instance = new Module["chessGame"];
        console.log('Fen default result: ' + instance["playTurn"]("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"));
        //console.log(localStorage.turn + " " + localStorage.pas + " " + localStorage.cas + " " + localStorage.half + " " + localStorage.full);
        console.log('fen result: ' + fen());
        console.log('Our fen result: ' + instance["playTurn"](fen()));
    };

    function instring() {
        //Temp delete later
        fenin("rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");
    }

    function flip_board() {
        flip_b();
    }
</script>
<script src="chess.js"></script>
<script type="text/javascript" src="fen.js"></script>

</html>